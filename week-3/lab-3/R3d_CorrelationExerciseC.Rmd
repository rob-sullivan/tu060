---
title: "R Notebook - Week 3 Probability and Statistical Inference"
author: "Deirdre Lawless"
output:
  html_document:
    df_print: paged
  html_notebook: default
  pdf_document: default
  word_document: default
editor_options:
  chunk_output_type: console
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

### SETUP

```{r}
#We are using a .sav file created from the SPSS file survey.sav  taken from SPSS Survival Manual 6th Edition Julie Pallant. This has been saved to a .dat format - more easily readable in R.
#http://spss.allenandunwin.com.s3-website-ap-southeast-2.amazonaws.com/data-files.html#.Wb0vvnWP-po
#Results on a survey on well being
#We need to load the file so that we can use it in R.

#Either make sure both the script and the file are in the same folder or qualify the path to the file.
getwd()

#fixes
#install.packages("haven")
library(haven)
path <- file.path("survey.sav")
survey <- read_sav(path)

#survey <- read.table("survey.dat")


#Setting the column names to be that used in the dataset but in lowercase to make life a bit easier
colnames(survey) <- tolower(colnames(survey))
#Remember to install this packages if you haven't already done so
library(ggplot2) #For creating histograms with more detail than plot

```

### FROM LECTURE
### CORRELATION
#### Scatterplot
```{r}

#Simple scatterplot of feeling of control and perceived stress
#aes(x,y)
scatter <- ggplot2::ggplot(survey, aes(tpstress, tpcoiss))
scatter + geom_point() + labs(x = "Total Perceived Stress", y = "Total PCOISS") 

#Add a regression line
scatter + geom_point() + geom_smooth(method = "lm", colour = "Red", se = F) + labs(x = "Total Perceived Stress", y = "Total PCOISS") 

#Note: When running this in RStudio the output will appear in the Plots tab on the right hand side, if not visible click the Plots tab
```

#### Conducting Correlation Tests - Pearson, Spearman, Kendall
 
```{r}

#Pearson Correlation
stats::cor.test(survey$tpcoiss, survey$tpstress, method='pearson')
# Statistically significant strong negative correlation

#Spearman Correlation
#Change the method to be spearman.
#This test will give an error since this method uses ranking but cannot handle ties but that is ok with us - we consider this to be missing data
cor.test(survey$tpcoiss, survey$tpstress, method = "spearman")

#We can also use kendall's tau which does handle ties
cor.test(survey$tpcoiss, survey$tpstress, method = "kendall")
```


### FROM LAB
### 1.	Relationship between Total Positive Affect and Total Perceived Stress.
#### Scatterplot
```{r}

#Simple scatterplot of  positive affect and perceived stress
#aes(x,y)
#Positive affect is explanatory/independent/predictor variable on the x axis
#Perceived stress is the response/dependent/outcome variable on the y axis
#Note: you may have chosen to switch the variables - this is not incorrect, you always make your choices based on your understanding of the context you are investigating

scatter <- ggplot2::ggplot(survey, aes(tposaff, tpstress))
#geom_point is used to create a scatter plot
#geom_smooth is used to add a regression line
scatter + geom_point() + geom_smooth(method = "lm", colour = "Red", se = F) + labs(x = "Total Positive Affect", y = "Total Perceived Stress") 

#Note: When running this in RStudio the output will appear in the Plots tab on the right hand side, if not visible click the Plots tab
```
#### Conducting Correlation Tests - Pearson, Spearman, Kendall
 
```{r}
#NOTE: We are running all the correlation tests here - in reality we decide which test is most appropriate
#Pearson Correlation
stats::cor.test(survey$tposaff, survey$tpstress, method='pearson')
#Statistically significant moderate negative relationship

#Spearman Correlation
#Change the method to be spearman.
#This test will give an error since this method uses ranking but cannot handle ties but that is ok with us - we consider this to be missing data
cor.test(survey$tposaff, survey$tpstress, method = "spearman")

#We can also use kendall's tau which does handle ties
cor.test(survey$tposaff, survey$tpstress, method = "kendall")
```

### 2.	Relationship between Total Life Satisfaction and Total Perceived Control of Internal States.
#### Scatterplot
```{r}

#Simple scatterplot of  perceived control and life satisfaction
#aes(x,y)
#Perceived control is explanatory/independent/predictor variable on the x axis
#Life Satisfaction   is the response/dependent/outcome variable on the y axis
#Note: you may have chosen to switch the variables - this is not incorrect, you always make your choices based on your understanding of the context you are investigating

scatter <- ggplot2::ggplot(survey, aes(tpcoiss, tlifesat))
#geom_point is used to create a scatter plot
#geom_smooth is used to add a regression line
scatter + geom_point() + geom_smooth(method = "lm", colour = "Red", se = F) + labs(x = "Total Perceived Control ", y = "Total Life Satisfaction") 

#Note: When running this in RStudio the output will appear in the Plots tab on the right hand side, if not visible click the Plots tab
```
#### Conducting Correlation Tests - Pearson, Spearman, Kendall
 
```{r}
#NOTE: We are running all the correlation tests here - in reality we decide which test is most appropriate
#Pearson Correlation
stats::cor.test(survey$tpcoiss, survey$tlifesat, method='pearson')
#Statistically significant moderate positive relationship

#Spearman Correlation
#Change the method to be spearman.
#This test will give an error since this method uses ranking but cannot handle ties but that is ok with us - we consider this to be missing data
cor.test(survey$tpcoiss, survey$tlifesat, method = "spearman")

#We can also use kendall's tau which does handle ties
cor.test(survey$tpcoiss, survey$tlifesat, method = "kendall")
```


### 3.	Relationship between Total Mastery and Total Optimism.
#### Scatterplot
```{r}

#Simple scatterplot of  total mastery and total optimism
#Optimism is explanatory/independent/predictor variable on the x axis
#Mastery   is the response/dependent/outcome variable on the y axis
#aes(x,y)
scatter <- ggplot2::ggplot(survey, aes(toptim, tmast))
#geom_point is used to create a scatter plot
#geom_smooth is used to add a regression line
scatter + geom_point() + geom_smooth(method = "lm", colour = "Red", se = F) + labs(x = "Total Optimism ", y = "Total Mastery") 

#Note: When running this in RStudio the output will appear in the Plots tab on the right hand side, if not visible click the Plots tab
```
#### Conducting Correlation Tests - Pearson, Spearman, Kendall
 
```{r}
#NOTE: We are running all the correlation tests here - in reality we decide which test is most appropriate
#Pearson Correlation
stats::cor.test(survey$toptim, survey$tmast, method='pearson')
#Statistically significant strong positive relationship

#Spearman Correlation
#Change the method to be spearman.
#This test will give an error since this method uses ranking but cannot handle ties but that is ok with us - we consider this to be missing data
cor.test(survey$toptim, survey$tmast, method = "spearman")

#We can also use kendall's tau which does handle ties
cor.test(survey$toptim, survey$tmast, method = "kendall")
```